# ⚡ kwwhat: open-source dbt models for EV charger analytics
dbt models for OCPP logs [here](https://github.com/appspace/kwwhat)

---
**kwwhat** is an open-source dbt project that models reliability and utilization metrics from EV charger logs based on the OCPP 1.6 and 2.0.1 protocols. Starting from raw OCPP logs, the project builds a transparent path toward meaningful metrics like uptime, session success, and visit-level outcomes.

This project is powered by public OCPP log data and is designed for CSMS providers, utilities, researchers, and data practitioners aiming to build their own charger analytics stack.

---

## What’s included

**kwwhat** includes:

- Source modeling for raw OCPP logs (StatusNotification, Heartbeat, Start/StopTransaction)
- Session and visit grouping logic
- Core metrics like:
  - Outages: from, to, type
  - Port _uptime (% time chargers heartbeating and ports not faulted - a solid base for calculating uptime by adding maintenance and exclusion rules)
  - Session-level and visit-level success
  - First attempt success rate
  - Troubled success rate
- Public OCPP logs for realistic examples
- Modular dbt structure to plug into your existing stack
- Interval data for other reporting use cases that require energy delivery by 15-min time slices

---

## Installation

```bash
git clone https://github.com/YOUR_USERNAME/kwwhat.git
cd kwwhat
````

Then update your `profiles.yml` to point to your raw data location (e.g., DuckDB, BigQuery, Snowflake, Redshift, etc.).

---

## Example metrics

| Metric                       | Description                                           |
| ---------------------------- | ----------------------------------------------------- |
| `_uptime_pct`                 | % of time a charger had a regular heartbeat and port was not in a Faulted state          |
| `visit_success_rate`         | % of visits that result in meaningful energy transfer. Visit is a rollup of sessions generated by the same driver on the co-located chargers close in time |
| `first_attempt_success_rate` | Visits where the first charging attempt succeeded     |
| `troubled_success_rate`      | Visits that initially failed but succeeded sfter some troubleshooting |

---

## Data sources & attribution

- OCPP 1.6 logs were kindly donated by [Epic Charging](https://www.linkedin.com/company/epiccharging)

- OCPP 2.0.1 logs were borrowed from [OCPP-2.0.1-Interim-KPI-Calculator](https://github.com/chargex-consortium/OCPP-2.0.1-Interim-KPI-Calculator$0)

Seed data was generated with [OCPP synthetic log generator](https://chatgpt.com/g/g-68923b4c67548191a90737f5c3dc4d57-ocpp-synthetic-log-generator)

Use `dbt seed` command to add seed data to your warehouse.

---

## Insights & References

Designed based on industry frameworks and academic research to align metrics with real-world expectations:

- The **Public EV Charging Infrastructure Playbook** by U.S. Joint Office offers guidance for performance evaluation in EV infrastructure [EV Charging KPI Playbook](https://driveelectric.gov/news/kpi-ev-playbook)

- The Sage‑published journal article **Novel Methodology to Measure the Reliability of Public DC Fast Charging Stations** proposes a data-driven framework for charger reliability, which informed the visits logic in kwwhat. [Novel Methodology to Measure the Reliability of Public DC Fast Charging Stations](https://journals.sagepub.com/doi/full/10.1177/03611981241244798)

- Uptime calculations modeled in part after [NEVI guidelines](https://driveelectric.gov/ev-infrastructure-funding/program-guidance/) 

---

## Disclaimer

This project was created independently and outside of any prior employment. It does **not** include any proprietary information, logic, or data.

---

## License

The kwwhat project is licensed under the [MIT License](LICENSE).
External datasets and tools used in this repo follow their respective licenses as noted above.

---

## Contributing

Open to contributions from the EV data community. If you’re building in this space and want to improve reliability tracking, user experience analytics, or charger diagnostics — join in!

---

## Contact

Questions? Ideas? Drop an issue.



